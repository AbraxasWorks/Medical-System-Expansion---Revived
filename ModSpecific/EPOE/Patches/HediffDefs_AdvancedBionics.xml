<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<Operation Class="PatchOperationAdd">
		<xpath>/Defs/HediffDef[@Name="addedPartAdvanced" or @Name="ImplantBaseSuit"]</xpath>
		<value>
			<priceImpact>true</priceImpact>
		</value>
	</Operation>


	<!-- adv power arm -->

	<Operation Class="PatchOperationAddOrMerge">
		<xpath>/Defs/HediffDef[@ParentName="addedPartAdvanced"][defName="AdvancedPowerArm"]</xpath>
		<value>
			<comps>
				<li Class="MSE2.HediffCompProperties_ModuleHolder">
					<maxModules>2</maxModules>
				</li>
			</comps>
		</value>
	</Operation>

	<Operation Class="PatchOperationAddOrMerge">
		<xpath>/Defs/ThingDef[@ParentName="Advanced"][defName="AdvancedPowerArm"]</xpath>
		<value>
			<comps>
				<li Class="MSE2.CompProperties_IncludedChildParts">
					<standardChildren>
						<li>AdvancedPowerForearm</li>
						<li>AdvancedBionicInternalSupport</li>
					</standardChildren>
				</li>
			</comps>
		</value>
	</Operation>

	<!-- adv bionic arm -->

	<Operation Class="PatchOperationAddOrMerge">
		<xpath>/Defs/ThingDef[@ParentName="Advanced"][defName="AdvancedBionicArm"]</xpath>
		<value>
			<comps>
				<li Class="MSE2.CompProperties_IncludedChildParts">
					<standardChildren>
						<li>AdvancedBionicForearm</li>
						<li>AdvancedBionicInternalSupport</li>
					</standardChildren>
				</li>
			</comps>
		</value>
	</Operation>

	<!-- adv bionic leg -->

	<Operation Class="PatchOperationAddOrMerge">
		<xpath>/Defs/HediffDef[@ParentName="addedPartAdvanced"][defName="AdvancedBionicLeg"]</xpath>
		<value>
			<comps>
				<li Class="MSE2.HediffCompProperties_ModuleHolder">
					<maxModules>1</maxModules>
				</li>
			</comps>
		</value>
	</Operation>

	<Operation Class="PatchOperationAddOrMerge">
		<xpath>/Defs/ThingDef[@ParentName="Advanced"][defName="AdvancedBionicLeg"]</xpath>
		<value>
			<comps>
				<li Class="MSE2.CompProperties_IncludedChildParts">
					<standardChildren>
						<li>AdvancedBionicFoot</li>
						<li>AdvancedBionicInternalSupport</li>
						<li>AdvancedBionicInternalSupport</li>
					</standardChildren>
				</li>
			</comps>
		</value>
	</Operation>

	<!-- adv bionic hand -->

	<Operation Class="PatchOperationAddOrMerge">
		<xpath>/Defs/HediffDef[@ParentName="addedPartAdvanced"][defName="AdvancedBionicHand"]</xpath>
		<value>
			<comps>
				<li Class="MSE2.HediffCompProperties_ModuleHolder">
					<maxModules>1</maxModules>
				</li>
			</comps>
		</value>
	</Operation>

	<Operation Class="PatchOperationAddOrMerge">
		<xpath>/Defs/ThingDef[@ParentName="Advanced"][defName="AdvancedBionicHand"]</xpath>
		<value>
			<comps>
				<li Class="MSE2.CompProperties_IncludedChildParts">
					<standardChildren>
						<li>AdvancedBionicFinger</li>
						<li>AdvancedBionicFinger</li>
						<li>AdvancedBionicFinger</li>
						<li>AdvancedBionicFinger</li>
						<li>AdvancedBionicFinger</li>
					</standardChildren>
				</li>
			</comps>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>/Defs/ThingDef[@ParentName="Advanced"][defName="AdvancedBionicHand"]/statBases</xpath>
		<value>
			<WorkToMake>4000</WorkToMake>
		</value>
	</Operation>

	<!-- adv bionic foot -->

	<Operation Class="PatchOperationAddOrMerge">
		<xpath>/Defs/ThingDef[@ParentName="Advanced"][defName="AdvancedBionicFoot"]</xpath>
		<value>
			<comps>
				<li Class="MSE2.CompProperties_IncludedChildParts">
					<standardChildren>
						<li>AdvancedBionicToe</li>
						<li>AdvancedBionicToe</li>
						<li>AdvancedBionicToe</li>
						<li>AdvancedBionicToe</li>
						<li>AdvancedBionicToe</li>
					</standardChildren>
				</li>
			</comps>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>/Defs/ThingDef[@ParentName="Advanced"][defName="AdvancedBionicFoot"]/statBases</xpath>
		<value>
			<WorkToMake>3700</WorkToMake>
		</value>
	</Operation>

	<!-- melee verbs on power hand -->

	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Combat Extended</li>
		</mods>
		<match Class="PatchOperationAddOrMerge">
			<xpath>/Defs/HediffDef[@ParentName="addedPartAdvanced"][defName="AdvancedPowerHand"]</xpath>
			<value>
				<comps>
					<li Class="HediffCompProperties_VerbGiver">
						<tools>
							<li Class="CombatExtended.ToolCE">
								<label>bionic fist</label>
								<capacities>
									<li>Blunt</li>
								</capacities>
								<power>9</power>
								<armorPenetrationBlunt>3</armorPenetrationBlunt>
								<cooldownTime>0.83</cooldownTime>
							</li>
						</tools>
					</li>
				</comps>
			</value>
		</match>
		<nomatch Class="PatchOperationAddOrMerge">
			<xpath>/Defs/HediffDef[@ParentName="addedPartAdvanced"][defName="AdvancedPowerHand"]</xpath>
			<value>
				<comps>
					<li Class="HediffCompProperties_VerbGiver">
						<tools>
							<li>
								<label>bionic fist</label>
								<capacities>
									<li>Blunt</li>
								</capacities>
								<power>16</power>
								<cooldownTime>1.65</cooldownTime>
							</li>
						</tools>
					</li>
				</comps>
			</value>
		</nomatch>
	</Operation>

	<!-- copy verbs -->

	<Operation Class="PatchOperationAddOrMergeCopy">
		<xpath>/Defs/HediffDef[@ParentName="MSE_ModuleAddedBionic"][defName="AdvancedPowerClaw"]</xpath>
		<fromxpath>/Defs/HediffDef[@ParentName="addedPartAdvanced"][defName="AdvancedPowerClaw"]/*[name()="comps" or name()="stages"]</fromxpath>
	</Operation>

	<!-- remove verbs -->
	<Operation Class="PatchOperationRemove">
		<xpath>/Defs/HediffDef[@ParentName="addedPartAdvanced"][defName="AdvancedPowerArm" or defName="AdvancedBionicArm"]/comps/li[@Class="HediffCompProperties_VerbGiver"]</xpath>
	</Operation>

</Patch>